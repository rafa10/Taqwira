{% for field in fields %}

    <div class="row">
        <div class="col s12">
            <div class="card">
                <div class="card-content row">
                    <div class="col s3">
                        <span class="card-title"><i class="medium mdi-action-view-array left"></i> {{ field.name }}</span>
                    </div>
                    <div class="col s6">
                        <p><i class="mdi-action-info-outline"></i> <b>Capacité</b>: {{ field.capacity }} joueurs</p>
                        <p>
                            {% set hideClass = null %}
                            {% for planning in field.planning if planning.field.id == field.id %}
                                <i class="mdi-notification-event-available"></i> <b>Période</b>: De <b>{{ planning.dateStart|date('d/m/Y') }}</b> à <b>{{ planning.dateEnd|date('d/m/Y') }}</b>
                            {% else %}
                                {% set hideClass = 'hide' %}
                                <i class="mdi-notification-event-available"></i> <b>Période</b>: <span class="red-text"><i class="mdi-alert-warning"></i> Non disponible</span>
                            {% endfor %}
                        </p>
                    </div>
                    <div class="col s3 right-align">
                        <span class="btn disabled">Aujourd'hui</span>
                    </div>
                </div>
                {#<div class="card-action center" id="today_bloc">#}
                    {#<span class="btn disabled"> Aujourd'hui</span>#}
                {#</div>#}
                {#==== calculer de nombre des jours dans le  planning =============================#}
                {% for planning in field.planning if planning.field.id == field.id %}
                    {#{% set difference = date(planning.dateEnd).diff(date(planning.dateStart)) %}#}
                    {#{% set leftDays = difference.days %}#}
                    {#{% for jour in 0..leftDays %}#}
                        {#{% set i = loop.index0 %}#}
                    {#===========================================================================================#}
                    {#=== Si la date d'aujourd'hui est inferieur a la date de fin de planning ===================#}
                    {#===========================================================================================#}
                    {% if planning.dateStart|date('U') > "now"|date('U') %}
                    <div class="card-action center grey lighten-5">
                        <span class="red-text">~~{#<i class=" mdi-alert-warning"></i>#} Aucun résultat trouvé ! ~~</span>
                    </div>
                    {#===========================================================================================#}
                    {#=== Si la date d'aujourd'hui est superieur ================================================#}
                    {#===========================================================================================#}
                    {% elseif 'now'|date('U') > "now"|date('U') %}
                        <div class="card-action center grey lighten-5">
                            <span class="red-text">~~{#<i class=" mdi-alert-warning"></i>#} Aucun résultat trouvé ! ~~</span>
                        </div>
                        {#===========================================================================================#}
                        {#=== Si la date d'aujourd'hui est superieur a la date de fin de planning ===================#}
                        {#===========================================================================================#}
                    {% elseif planning.dateEnd|date('Y-m-d') < "now"|date('Y-m-d') %}
                        <div class="card-action center grey lighten-5">
                            <span class="red-text">~~{#<i class=" mdi-alert-warning"></i>#} Aucun résultat trouvé ! ~~</span>
                        </div>
                    {#==========================================================================================#}
                    {#=== Si c'est la date d'aujourd'huit ======================================================#}
                    {#==========================================================================================#}
                    {% else %}
                        {% set nowColor = 'grey lighten-4' %}
                        <div class="card-action center session-day-{{ field.id }} {{ nowColor }}">
                            {#<span>#}
                            {% for day in days %}
                                {% if day.name == "now"|date('l') %}
                                    {% for price in day.Price %}
                                        {% for sessionP in price.Session %}
                                            {% for sessionF in field.session %}
                                                {% if sessionF.id == sessionP.id %}
                                                    {% if sessionF.timeStart|date('H:i') >= 'now'|date('H:i') %}
                                                        {% set bookSelected %} <a class="tooltipped modal_trigger" data-position="top" data-delay="50" data-tooltip="{{ price.amount }}€" data-href="{{ path('booking_match_details', {'field': field.id ,'date': 'now'|date('Y/m/d'), 'timeS': sessionF.timeStart|date('H:i'), 'timeE': sessionF.timeEnd|date('H:i'), 'price': price.amount }) }}"><div class="chip waves-effect waves-light lime"><i class="mdi-action-alarm"></i>  {{ sessionF.timeStart|date('H:i') }}</div></a>{% endset %}
                                                        {% for booking in bookings if booking.field.id == field.id %}
                                                            {% if booking.date|date('Y-m-d') == "now"|date('Y-m-d') and booking.timeStart|date('H:i') == sessionF.timeStart|date('H:i') %}
                                                                {% set bookSelected %} <a class="disabled"><div class="chip red lighten-1 red-text text-lighten-4"><i class="mdi-action-alarm"></i>  {{ sessionF.timeStart|date('H:i') }}</div></a> {% endset %}
                                                            {% endif %}
                                                        {% endfor %}
                                                        {{ bookSelected }}
                                                    {% else %}
                                                        <a class="disabled"><div class="chip"><i class="mdi-action-alarm"></i>  {{ sessionF.timeStart|date('H:i') }}</div></a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endfor %}
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                            {#</span>#}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

{% endfor %}














